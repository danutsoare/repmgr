# Systemd override configuration for PostgreSQL {{ postgresql_version }}
# Generated by Ansible for cluster {{ cluster_name }}

[Service]
Environment=PGDATA={{ postgresql_data_dir }}
Environment=PGPORT={{ postgresql_port }}
Environment=PGUSER={{ postgresql_user }}

# Custom ExecStart for specific data directory and port
ExecStart=
ExecStart=/usr/pgsql-{{ postgresql_version }}/bin/postgres -D {{ postgresql_data_dir }} -p {{ postgresql_port }}

# Ensure proper restart behavior
Restart=always
RestartSec=5

# Set limits
LimitNOFILE=65536
LimitNPROC=65536

# Process management
KillMode=mixed
KillSignal=SIGINT
SendSIGKILL=no
TimeoutSec=300